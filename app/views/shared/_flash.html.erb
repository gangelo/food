<% flash_hash = flash.to_h.each_pair do |flash_type, value| %>
  <% if value.is_a?(Array) %>
    <%= render partial: "shared/flash_message",
               collection: value,
               locals: {
                  flash_type: flash_type
               }
    %>
  <% else %>
    <%= render partial: "shared/flash_message",
               locals: {
                  flash_type: flash_type,
                  flash_message: value
               }
    %>
  <% end %>
<% end %>

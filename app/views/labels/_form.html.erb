<%
method ||= :post
label_presenter = label.presenter
%>
<main class="form form-label">
  <%= simple_form_for(label,
                      url: postback_path,
                      method: method,
                      wrapper: :horizontal_form) do |f| %>
    <div class="h1 mb-3 fw-normal">
      <i class="bi <%= header_icon %>"></i>
      <%= header_text %>
    </div>

    <% if f.object.errors[:base].present? %>
      <div class="row mb-3">
        <div class="col-sm-12 col-md-9 col-lg-7">
          <%= render partial: "shared/flash_message",
                      locals: {
                        flash_type: "alert",
                        flash_message: f.object.errors[:base].to_sentence
                      }
          %>
        </div>
      </div>
    <% end %>
    <%= f.input :label_name,
            required: true,
            label: "Name",
            autofocus: true
    %>
    <div class="form-group row">
      <%= f.label :archived, class: 'col-sm-2 col-md-2 col-lg-2 col-form-label' %>
      <div class="col-sm-9">
        <%= f.input :archived, as: :boolean, label: false, wrapper: false, class: 'form-check-input' %>
      </div>
    </div>

    <!-- Type ahead search -->
    <%= f.input :query,
                label: "Items <abbr title='required'>*</abbr>".html_safe,
                label_html: { class: "required" },
                placeholder: "Search for items to associate with this label",
                autocomplete: "off",
                input_html: {
                  data: {
                    action: "input->label-items#labelItemsSearch",
                    label_items_target: "input"
                  }
                }
    %>

    <div class="row mb-3">
      <div class="col-sm-2 col-md-2 col-lg-2 col-form-label">
          <%= f.button :submit,
                        submit_button_text,
                        class: "btn btn-primary"
          %>
          <div class="help-links">
            <%= link_to "Back", back_path %>
          </div>
      </div>
      <div data-label-items-target="results" class="col-sm-10 col-md-7 col-lg-5">
      </div>
    </div>
    <div data-label-items-target="selectedItemIdsContainer" class="d-none">
    </div>
  <% end %>
</main>
